<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<title> Tutorial: Custom Nodes</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

	<link type="text/css" rel="stylesheet" href="styles/site.slate.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top ">
<div class="container">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html"><div style='font-size:15px;line-height:15px;margin-top:-5px;'>Web Cabin Play<br>v1.0.0</div></a>
		<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#topNavigation">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
        </button>
	</div>
	<div class="navbar-collapse collapse" id="topNavigation">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu inline">
					<li><a href="wcNode.html">wcNode</a></li><li><a href="wcNodeComposite.html">wcNodeComposite</a></li><li><a href="wcNodeEntry.html">wcNodeEntry</a></li><li><a href="wcNodeEntryCallRemote.html">wcNodeEntryCallRemote</a></li><li><a href="wcNodeEntryRemote.html">wcNodeEntryRemote</a></li><li><a href="wcNodeEntryStart.html">wcNodeEntryStart</a></li><li><a href="wcNodeEntryUpdate.html">wcNodeEntryUpdate</a></li><li><a href="wcNodeProcess.html">wcNodeProcess</a></li><li><a href="wcNodeProcessAJAX.html">wcNodeProcessAJAX</a></li><li><a href="wcNodeProcessAlert.html">wcNodeProcessAlert</a></li><li><a href="wcNodeProcessConsoleLog.html">wcNodeProcessConsoleLog</a></li><li><a href="wcNodeProcessDelay.html">wcNodeProcessDelay</a></li><li><a href="wcNodeProcessOperation.html">wcNodeProcessOperation</a></li><li><a href="wcNodeProcessStrCat.html">wcNodeProcessStrCat</a></li><li><a href="wcNodeStorage.html">wcNodeStorage</a></li><li><a href="wcNodeStorageGlobal.html">wcNodeStorageGlobal</a></li><li><a href="wcNodeStorageNumber.html">wcNodeStorageNumber</a></li><li><a href="wcNodeStorageString.html">wcNodeStorageString</a></li><li><a href="wcNodeStorageToggle.html">wcNodeStorageToggle</a></li><li><a href="wcPlay.html">wcPlay</a></li><li><a href="wcPlayEditor.html">wcPlayEditor</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
				<ul class="dropdown-menu inline">
					<li><a href="tutorial-1.0.html">Getting Started</a></li><li><a href="tutorial-2.0.html">Node Anatomy</a></li><li><a href="tutorial-3.0.html">Debugging</a></li><li><a href="tutorial-4.0.html">Custom Nodes</a></li><li><a href="tutorial-5.0.html">FAQ</a></li>
				</ul>
			</li>
			
		</ul>
		<div class="col-sm-3 col-md-3">
            <form class="navbar-form" role="search">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search" name="q" id="search-input">
                    <div class="input-group-btn">
                        <button class="btn btn-default" id="search-submit"><i class="glyphicon glyphicon-search"></i></button>
                    </div>
                </div>
            </form>
        </div>
	</div>

</div>
</div>


<div class="container" id="toc-content">
<div class="row">

	
	<div class="col-md-12">
	
		<div id="main">
			<section class="tutorial-section">

<header>
    

    <h2>Custom Nodes</h2>
</header>

<article>
    <p>One important aspect of your script is the ability to have custom nodes. Not all scripts can solely rely on the core set of nodes provided for you by wcPlay. For this, custom nodes can be developed for use in your scripts. Custom nodes are written directly in JavaScript and included into your page via the <code>&lt;script&gt;</code> tag.</p>
<pre class="prettyprint source"><code>wcNodeProcess.extend('wcNodeProcessDelay', 'Delay', 'Core', {
  /**
   * @class
   * Waits for a specified amount of time before continuing the flow chain.&lt;br>
   * When inheriting, make sure to include 'this._super(parent, pos);' at the top of your init function.
   *
   * @constructor wcNodeProcessDelay
   * @param {String} parent - The parent object of this node.
   * @param {wcPlay~Coordinates} pos - The position of this node in the visual editor.
   */
  init: function(parent, pos) {
    this._super(parent, pos);

    this.description(&quot;Waits for a specified amount of time before continuing the flow chain.&quot;);

    // Create the message property so we know what to output in the log.
    this.createProperty('milliseconds', wcPlay.PROPERTY.NUMBER, 1000, {description: &quot;The time delay, in milliseconds, to wait before firing the 'out' Exit link.&quot;});
  },

  /**
   * Event that is called when an entry link has been activated.&lt;br>
   * Overload this in inherited nodes, be sure to call 'this._super(..)' at the top.
   * @function wcNodeProcessDelay#onActivated
   * @param {String} name - The name of the entry link triggered.
   */
  onActivated: function(name) {
    this._super(name);

    // Now set a timeout to wait for 'Milliseconds' amount of time.    
    var delay = this.property('milliseconds');

    // Start a timeout event using the node's built in timeout handler.
    this.setTimeout(function() {
      this.activateExit('out');
    }, delay);
  },
});</code></pre><hr>
<h3>Extending a Node Class</h3><p>To program your own node, use the <code>extend</code> method on any base node class. Base node classes are either <code>wcNodeEntry</code>, <code>wcNodeProcess</code>, or <code>wcNodeStorage</code> depending on what type of node you want to make.</p>
<ul>
<li>Entry nodes generally begin chains, they listen for specific events and activate themselves whenever those conditions pass.</li>
<li>Process nodes make up the bulk of your script, these nodes are designed to perform an action whenever they are activated through an Entry link, and then continue the script by activating an Exit link.</li>
<li>Storage nodes are very simply a node that just stores a property value.</li>
</ul>
<p>The extend method takes a number of parameters explained <a href="wcNode.html#extend">here</a>.</p>
<hr>
<h3>Setting up Properties and Links</h3><p>Once you have extended your new node class, you will want to implement the <code>init</code> method first, this is your constructor where all your <a href="wcNode.html#createEntry">Entry</a>, <a href="wcNode.html#createExit">Exit</a>, and <a href="wcNode.html#createProperty">Property</a> setup should be.</p>
<p>By default, all nodes have an 'enabled' property, all <code>Entry</code> nodes have an 'out' Exit link, and all <code>Process</code> nodes have an 'in' Entry link and an 'out' Exit link.</p>
<p>You should never remove the 'enabled' property, as doing so will permenently disable your node. However, the default Entry and Exit links can be removed via the <a href="wcNode.html#removeEntry">wcNode.removeEntry</a> and <a href="wcNode.html#removeExit">wcNode.removeExit</a> methods.</p>
<hr>
<h3>Overloading Event Methods</h3><p>In many cases, you will need to catch events as they happen on your node. For this, <a href="wcNode.html">wcNode</a> provides many event methods that you can overload. All event methods are prefixed with <code>'on'</code> in their names, such as <a href="wcNode.html#onActivated">wcNode.onActivated</a>. There are many more event hooks to use, to see a listing, view the <a href="wcNode.html">documentation</a>.</p>
<hr>
<h3>Latent Nodes</h3><p>In cases where your node may take time to perform an action, a threading system is provided for you. This allows the script to keep track of any timeout, or latent, events being processed on a node so it may have a better sense of what nodes are active, as well as a method for cancelling node operations if necessary.</p>
<p>There are a few ways to implement a latent node:</p>
<ul>
<li>The recommended method is shown in the example code above, it uses a special <a href="wcNode.html#setTimeout">wcNode.setTimeout</a> method in place of the global <code>window.setTimeout</code>. The reason this is recommended, is the actual timeout is handled internally so it can be paused, resumed, and even canceled by the script if necessary. This allows the live debugger to more accurately step a node by only a specified amount of time. Also provided is the <a href="wcNode.html#setInterval">wcNode.setInterval</a> which should replace any call to the global <code>window.setInterval</code>.</li>
<li>For AJAX requests, <a href="wcNode.html#ajax">wcNode.ajax</a> is provided as a wrapper for jQuery's AJAX functionality. Again, it is recommended that you run ajax commands through this method as it is better equipped for the live debugger.</li>
<li>Alternatively, you can use the global <code>window.setTimeout</code> and <code>window.setInterval</code> functions, with a slight alteration. The resulting ID of the timer function should be sent to <a href="wcNode.html#beginThread">wcNode.beginThread</a> when started, and again to <a href="wcNode.html#finishThread">wcNode.finishThread</a> when the timed event is finished. Although wcPlay supports these, it is not recommended as the live debugger has limited control which will cause a less accurate debugging experience.</li>
<li>The final method for implementing a latent node is through a custom cancellation function. This is the worst and most complicated way to do it, but is provided in those cases where it is absolutely necessary. To do this, perform your latent operation as normal, except you also need to provide a callback function that can be called to cancel, or ignore, the resulting event when it comes in. This won't help much during debugging, but it will allow the script to properly stop when necessary.</li>
</ul>
<hr>
<h3>Continuing the Flow</h3><p>It is very important for nodes to continue the flow chain, it does not happen automatically. When your node has performed its task, it should then use the <a href="wcNode.html#activateExit">wcNode.activateExit</a> method to activate one of its available Exit links.</p>
<p><strong>Note:</strong> There is currently a known bug with the debugger where it does not highlighting the nodes and links properly if you modify a property value after you have already activated an Exit link. As a work around, always activate Exit links last.</p>
<hr>
<p>Return to the <a href="tutorial-3.0.html">Debugging</a> tutorial.<br>Continue to the <a href="tutorial-5.0.html">FAQ</a> tutorial.  </p>
</article>

</section>

		</div>
	</div>

	<div class="clearfix"></div>

	

</div>
</div>

<div class="modal fade" id="searchResults">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Search results</h4>
      </div>
      <div class="modal-body"></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div>

<footer>


	<span class="copyright">
	2014-2016 Jeff Houde (<a href='mailto:lochemage@webcabin.org'>lochemage@webcabin.org</a>)
	</span>

<span class="jsdoc-message">
	Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a>
	
		on 2016-08-08
	
	using the <a href="https://github.com/docstrap/docstrap">DocStrap template</a>.
</span>
</footer>

<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/toc.js"></script>
<script type="text/javascript" src="scripts/fulltext-search-ui.js"></script>

<script>
$( function () {
	$( "[id*='$']" ).each( function () {
		var $this = $( this );

		$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	} );

	$( ".tutorial-section pre, .readme-section pre" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			var langClassMatch = example.parent()[0].className.match(/lang\-(\S+)/);
			lang = langClassMatch ? langClassMatch[1] : "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$.catchAnchorLinks( {
        navbarOffset: 10
	} );
	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			return $( heading ).attr( "id" ) || ( prefix + i );
		},
		selectors   : "#toc-content h1,#toc-content h2,#toc-content h3,#toc-content h4",
		showAndHide : false,
		smoothScrolling: true
	} );

	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();

    $( "table" ).each( function () {
      var $this = $( this );
      $this.addClass('table');
    } );

} );
</script>



<!--Navigation and Symbol Display-->





<!-- Piwik Analytics -->
<script type="text/javascript">
  var _paq = _paq || [];
  
  
  
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.webcabin.org/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 8]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="https://analytics.webcabin.org/piwik.php?idsite=8" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->


<script type="text/javascript">
	$(document).ready(function() {
		SearcherDisplay.init();
	});
</script>

</body>
</html>