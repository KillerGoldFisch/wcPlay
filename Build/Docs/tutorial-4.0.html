<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>wcPlay tutorialCustom Nodes</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.dark.css">

	<link type="text/css" rel="stylesheet" href="styles/site.superhero.css">

</head>

<body>

<div class="navbar navbar-default navbar-fixed-top navbar-inverse">
<div class="container-fluid">
	<div class="navbar-header">
		<a class="navbar-brand" href="index.html"><div style='font-size:15px;line-height:15px;margin-top:-5px;'>Web Cabin Play<br>v1.0.0</div></a>
	</div>
	<div class="navbar-collapse">
		<ul class="nav navbar-nav">
			
			<li class="dropdown">
				<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="wcNode.html">wcNode</a></li><li><a href="wcNodeComposite.html">wcNodeComposite</a></li><li><a href="wcNodeEntry.html">wcNodeEntry</a></li><li><a href="wcNodeEntryStart.html">wcNodeEntryStart</a></li><li><a href="wcNodeEntryUpdate.html">wcNodeEntryUpdate</a></li><li><a href="wcNodeProcess.html">wcNodeProcess</a></li><li><a href="wcNodeProcessAlert.html">wcNodeProcessAlert</a></li><li><a href="wcNodeProcessConsoleLog.html">wcNodeProcessConsoleLog</a></li><li><a href="wcNodeProcessDelay.html">wcNodeProcessDelay</a></li><li><a href="wcNodeProcessOperation.html">wcNodeProcessOperation</a></li><li><a href="wcNodeProcessStrCat.html">wcNodeProcessStrCat</a></li><li><a href="wcNodeStorage.html">wcNodeStorage</a></li><li><a href="wcNodeStorageGlobal.html">wcNodeStorageGlobal</a></li><li><a href="wcNodeStorageNumber.html">wcNodeStorageNumber</a></li><li><a href="wcNodeStorageString.html">wcNodeStorageString</a></li><li><a href="wcNodeStorageToggle.html">wcNodeStorageToggle</a></li><li><a href="wcPlay.html">wcPlay</a></li><li><a href="wcPlayEditor.html">wcPlayEditor</a></li>
				</ul>
			</li>
			
			<li class="dropdown">
				<a href="tutorials.list.html" class="dropdown-toggle" data-toggle="dropdown">Tutorials<b class="caret"></b></a>
				<ul class="dropdown-menu ">
					<li><a href="tutorial-1.0.html">Getting Started</a></li><li><a href="tutorial-2.0.html">Node Anatomy</a></li><li><a href="tutorial-3.0.html">Debugging</a></li><li><a href="tutorial-4.0.html">Custom Nodes</a></li><li><a href="tutorial-5.0.html">FAQ</a></li>
				</ul>
			</li>
			
		</ul>
	</div>
</div>
</div>


<div class="container-fluid">
<div class="row">

	
	<div class="col-xs-8 col-sm-8 col-md-8 col-xs-offset-1">
	
		<div id="main">
    		<section class="tutorial-section">

<header>
    

    <h2>Custom Nodes</h2>
</header>

<article>
    <p>One important aspect of your script is the ability to have custom nodes. Not all scripts can solely rely on the core set of nodes provided for you by wcPlay. For this, custom nodes can be developed for use in your scripts. Custom nodes are written directly in JavaScript and included into your page via the <code>&lt;script&gt;</code> tag.</p>
<pre class="prettyprint source"><code>wcNodeProcess.extend('wcNodeProcessDelay', 'Delay', 'Core', {
  /**
   * @class
   * Waits for a specified amount of time before continuing the flow chain.&lt;br>
   * When inheriting, make sure to include 'this._super(parent, pos);' at the top of your init function.
   *
   * @constructor wcNodeProcessDelay
   * @param {String} parent - The parent object of this node.
   * @param {wcPlay~Coordinates} pos - The position of this node in the visual editor.
   */
  init: function(parent, pos) {
    this._super(parent, pos);

    this.description(&quot;Waits for a specified amount of time before continuing the flow chain.&quot;);

    // Create the message property so we know what to output in the log.
    this.createProperty('milliseconds', wcPlay.PROPERTY.NUMBER, 1000, {description: &quot;The time delay, in milliseconds, to wait before firing the 'out' Exit link.&quot;});
  },

  /**
   * Event that is called when an entry link has been triggered.&lt;br>
   * Overload this in inherited nodes, be sure to call 'this._super(..)' at the top.
   * @function wcNodeProcessDelay#onTriggered
   * @param {String} name - The name of the entry link triggered.
   */
  onTriggered: function(name) {
    this._super(name);

    // Now set a timeout to wait for 'Milliseconds' amount of time.    
    var self = this;
    var delay = this.property('milliseconds');

    // Start a new thread that will keep the node alive until we are finished.
    var thread = this.beginThread(setTimeout(function() {
      // Once the time has completed, fire the 'out' link and finish our thread.
      self.activateExit('out');
      self.finishThread(thread);
    }, delay));
  },
});</code></pre><hr>
<h3>Extending a Node Class</h3><p>To program your own node, use the <code>extend</code> function on any base node class. Base node classes are either <code>wcNodeEntry</code>, <code>wcNodeProcess</code>, or <code>wcNodeStorage</code> depending on what type of node you want to make.</p>
<ul>
<li>Entry nodes generally begin chains, they listen for specific events and activate themselves whenever those conditions pass.</li>
<li>Process nodes make up the bulk of your script, these nodes are designed to perform an action whenever they are activated through an Entry link, and then continue the script by activating an Exit link.</li>
<li>Storage nodes are very simply a node that just stores a property value.</li>
</ul>
<p>The extend function takes a number of parameters explained <a href="wcNode.html#extend">here</a>.</p>
<hr>
<h3>Setting up Properties and Links</h3><p>Once you have extended your new node class, you will want to implement the <code>init</code> function first, this is your constructor where all your <a href="wcNode.html#createEntry">Entry</a>, <a href="wcNode.html#createExit">Exit</a>, and <a href="wcNode.html#createProperty">Property</a> setup should be.</p>
<p>By default, all nodes have an 'enabled' property, all <code>Entry</code> nodes have an 'out' Exit link, and all <code>Process</code> nodes have an 'in' Entry link and an 'out' Exit link.</p>
<p>You should never remove the 'enabled' property, as doing so will permenently disable your node. However, the default Entry and Exit links can be removed via the <a href="wcNode.html#removeEntry">wcNode#removeEntry</a> and <a href="wcNode.html#removeExit">wcNode#removeExit</a> functions.</p>
<hr>
<h3>Overloading Event Functions</h3><p>In many cases, you will need to catch events as they happen on your node. For this, <a href="wcNode.html">wcNode</a> provides many event functions that you can overload. All event functions begin with 'on' in their name, such as <a href="wcNode.html#onTriggered">onTriggered</a>. There are many more event hooks to use, to see a listing, view the <a href="wcNode.html">documentation</a>.</p>
<hr>
<h3>Latent Nodes</h3><p>In cases where your node may take time to perform an action, a threading system is provided for you. This allows the script to keep track of any timeout, or latent, events being processed on a node, so it may have a better sense of what nodes are active, as well as a method for cancelling node operations if necessary. Begin a thread using the <a href="wcNode.html#beginThread">wcNode#beginThread</a> function and passing in either the timeout ID, interval ID, or a function to call when it becomes necessary to cancel the operation. Once your timeout has triggered, you will also need to call the <a href="wcNode.html#finishThread">wcNode#finishThread</a> function to notify and close your active thread.</p>
<p>The code snippet above shows a simple example of a latent node. Notice how the result of beginThread is caught and then later used to finish the thread.</p>
<hr>
<p>Return to the <a href="tutorial-3.0.html">Debugging</a> tutorial.<br>Continue to the <a href="tutorial-5.0.html">FAQ</a> tutorial.  </p>
</article>

</section>

		</div>
	</div>

	<div class="clearfix"></div>

	
		<div class="col-md-3">
			<div id="toc" class="col-xs-3 col-sm-3 col-md-3 small"></div>
		</div>
	

</div>

<div class="row">
	
	<div class="col-xs-8 col-sm-8 col-md-8 col-xs-offset-1">
	
		<footer>
		
		
		<span class="jsdoc-message">
			Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0-dev</a>
			on 2015-04-27 using the <a
			href="https://github.com/WebCabin/docstrap">Web Cabin DocStrap template</a>.
		</span>
		</footer>
	</div>
</div>
<div style="height:1000px;"></div>

<!--<script src="scripts/sunlight.js"></script>-->
<script src="scripts/docstrap.lib.js"></script>
<script src="scripts/bootstrap-dropdown.js"></script>
<script src="scripts/toc.js"></script>

<script>
$( function () {
	// $( "[id*='$']" ).each( function () {
	// 	var $this = $( this );

	// 	$this.attr( "id", $this.attr( "id" ).replace( "$", "__" ) );
	// } );

	$( "#toc" ).toc( {
		anchorName  : function ( i, heading, prefix ) {
			// return $( heading ).attr( "id" ) || ( prefix + i );
			return ( prefix + i );
		},
		selectors   : "h1,h2,h3,h4",
		showAndHide : false,
		scrollTo    : "100px"
	} );

	$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
	$( "#main span[id^='toc']" ).addClass( "toc-shim" );
	$( '.dropdown-toggle' ).dropdown();
	// $( ".tutorial-section pre, .readme-section pre" ).addClass( "sunlight-highlight-javascript" ).addClass( "linenums" );

	$( ".tutorial-section pre, .readme-section pre" ).each( function () {
		var $this = $( this );

		var example = $this.find( "code" );
		exampleText = example.html();
		var lang = /{@lang (.*?)}/.exec( exampleText );
		if ( lang && lang[1] ) {
			exampleText = exampleText.replace( lang[0], "" );
			example.html( exampleText );
			lang = lang[1];
		} else {
			lang = "javascript";
		}

		if ( lang ) {

			$this
			.addClass( "sunlight-highlight-" + lang )
			.addClass( "linenums" )
			.html( example.html() );

		}
	} );

	Sunlight.highlightAll( {
		lineNumbers : true,
		showMenu : true,
		enableDoclinks : true
	} );

	$("a[name^='sunlight-1-line-']").each(function() {
		$(this).wrap('<div id="' + this.name + '" style="padding-top:40px;margin-top:-40px;display:inline-block;" class="sunlight-line-container"></div>');
		this.name = '';
	});

  $("h1,h2,h3,h4").each(function() {
  	$(this).css('padding-top', 50).css('margin-top', -50);
  });
} );
</script>






<!-- Piwik Analytics -->
<script type="text/javascript">
  var _paq = _paq || [];
  
  
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://analytics.webcabin.org/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 8]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="https://analytics.webcabin.org/piwik.php?idsite=8" style="border:0;" alt="" /></p></noscript>
<!-- End Piwik Code -->



</body>
</html>